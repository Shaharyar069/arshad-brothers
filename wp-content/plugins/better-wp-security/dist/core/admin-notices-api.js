(globalThis.itsecWebpackJsonP=globalThis.itsecWebpackJsonP||[]).push([[689],{76864:(t,e,r)=>{"use strict";r.r(e);var i={};r.r(i),r.d(i,{FAILED_NOTICE_ACTION:()=>w,FAILED_UPDATE_MUTED_HIGHLIGHT:()=>O,FINISH_NOTICE_ACTION:()=>A,FINISH_UPDATE_MUTED_HIGHLIGHT:()=>C,RECEIVE_MUTED_HIGHLIGHTS:()=>Z,RECEIVE_NOTICES:()=>b,START_NOTICE_ACTION:()=>H,START_UPDATE_MUTED_HIGHLIGHT:()=>S,doNoticeAction:()=>T,failedNoticeAction:()=>m,failedUpdateMutedHighlight:()=>I,finishNoticeAction:()=>p,finishUpdateMutedHighlight:()=>E,receiveMutedHighlights:()=>v,receiveNotices:()=>g,startNoticeAction:()=>f,startUpdateMutedHighlight:()=>y,updateMutedHighlight:()=>_});var n={};r.r(n),r.d(n,{areNoticesLoaded:()=>D,getInProgressActions:()=>k,getMutedHighlightUpdatesInFlight:()=>j,getMutedHighlights:()=>R,getNotices:()=>P,isDoingAction:()=>F,isResolved:()=>U,isResolving:()=>N});var s={};r.r(s),r.d(s,{getMutedHighlights:()=>L,getNotices:()=>G});var o=r(48015),c=r(92819),u=r(87514),a=r.n(u),d=r(31511);function l(t){return{type:"API_FETCH",request:t}}const h={API_FETCH(t){let{request:e}=t;return a()(e).catch(d.xJ)},SELECT(t){let{selectorName:e,args:r}=t;return(0,o.select)("ithemes-security/admin-notices")[e](...r)},CREATE_NOTICE(t){let{status:e,content:r,options:i}=t;i.autoDismiss&&(i.id=i.id||(0,c.uniqueId)("itsec-auto-dismiss-"),setTimeout((()=>(0,o.dispatch)("core/notices").removeNotice(i.id,i.context)),i.autoDismiss)),(0,o.dispatch)("core/notices").createNotice(e,r,i)}};function g(t){return{type:b,notices:t}}function f(t,e){return{type:H,noticeId:t,actionId:e}}function p(t,e,r){return{type:A,noticeId:t,actionId:e,response:r}}function m(t,e,r){return{type:w,noticeId:t,actionId:e,error:r}}function v(t){return{type:Z,mutedHighlights:t}}function y(t,e){return{type:S,slug:t,mute:e}}function E(t,e){return{type:C,slug:t,mute:e}}function I(t,e,r){return{type:O,slug:t,mute:e,error:r}}function*T(t,e){let r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yield f(t,e);try{r=yield l({path:`/ithemes-security/v1/admin-notices/${t}/${e}`,method:"POST",data:i})}catch(r){return yield m(t,e,r),r}return yield p(t,e,r),r}function*_(t,e){let r;yield y(t,e);try{r=yield l({path:"/ithemes-security/v1/admin-notices/settings",method:"PUT",data:{muted_highlights:{[t]:e}}})}catch(r){return yield I(t,e,r),r}return yield E(t,e),r}const b="RECEIVE_NOTICES",H="START_NOTICE_ACTION",A="FINISH_NOTICE_ACTION",w="FAILED_NOTICE_ACTION",Z="RECEIVE_MUTED_HIGHLIGHTS",S="START_UPDATE_MUTED_HIGHLIGHT",C="FINISH_UPDATE_MUTED_HIGHLIGHT",O="FAILED_UPDATE_MUTED_HIGHLIGHT";function N(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return(0,o.select)("core/data").isResolving("ithemes-security/admin-notices",t,r)}function U(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return(0,o.select)("core/data").hasFinishedResolution("ithemes-security/admin-notices",t,r)}function P(t){return t.notices}function D(){return U("getNotices")}function F(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return!!t.doingActions[e]&&(""===r||t.doingActions[e].includes(r))}const M=[];function k(t,e){return t.doingActions[e]||M}function R(t){return t.mutedHighlights}function j(t){return t.mutedHighlightUpdatesInFlight}const x={notices:[],doingActions:{},mutedHighlights:{},mutedHighlightUpdatesInFlight:{}},G={*fulfill(){const t=yield l({path:"/ithemes-security/v1/admin-notices"});yield g(t)},shouldInvalidate:t=>t.type===A||t.type===C};function*L(){const t=yield l({path:"/ithemes-security/v1/admin-notices/settings"});yield v((0,c.isEmpty)(t.muted_highlights)?{}:t.muted_highlights)}(0,o.registerStore)("ithemes-security/admin-notices",{controls:h,actions:i,selectors:n,resolvers:s,reducer:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case b:return{...t,notices:[...e.notices]};case H:return{...t,doingActions:{...t.doingActions,[e.noticeId]:[...t.doingActions[e.noticeId]||[],e.actionId]}};case A:case w:return{...t,doingActions:{...t.doingActions,[e.noticeId]:(t.doingActions[e.noticeId]||[]).filter((t=>t!==e.actionId))}};case Z:return{...t,mutedHighlights:e.mutedHighlights};case S:return{...t,mutedHighlightUpdatesInFlight:{...t.mutedHighlightUpdatesInFlight,[e.slug]:{mute:e.mute}}};case C:return{...t,mutedHighlightUpdatesInFlight:(0,c.omit)(t.mutedHighlightUpdatesInFlight,e.slug),mutedHighlights:{...t.mutedHighlights,[e.slug]:e.mute}};case O:return{...t,mutedHighlightUpdatesInFlight:(0,c.omit)(t.mutedHighlightUpdatesInFlight,e.slug)};default:return t}}}),r.p=window.itsecWebpackPublicPath},31511:(t,e,r)=>{"use strict";r.d(e,{sE:()=>H,x4:()=>p,PN:()=>h,pL:()=>_,NC:()=>I,N4:()=>T,CO:()=>Z,AW:()=>w,SU:()=>A,ZE:()=>E,UC:()=>S,xJ:()=>b,z8:()=>y,Y3:()=>C,bv:()=>v});var i=r(92819),n=r(6293),s=r(73470),o=r(4942),c=r(13092),u=r(86033);function a(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}var d=new WeakMap,l=new WeakMap;class h{constructor(){var t=this;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;a(this,d,{writable:!0,value:{}}),a(this,l,{writable:!0,value:{}}),(0,o.Z)(this,"add",((t,e,r)=>((0,u.Z)(this,d)[t]||((0,u.Z)(this,d)[t]=[]),(0,u.Z)(this,d)[t].push(e),r&&((0,u.Z)(this,l)[t]||((0,u.Z)(this,l)[t]=[]),(0,u.Z)(this,l)[t].push(r)),this))),(0,o.Z)(this,"hasErrors",(()=>this.getErrorCodes().length>0)),(0,o.Z)(this,"getErrorCodes",(()=>Object.keys((0,u.Z)(this,d)))),(0,o.Z)(this,"getErrorCode",(()=>this.getErrorCodes()[0])),(0,o.Z)(this,"getErrorMessages",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)return(0,u.Z)(t,d)[e];const r=[];for(const e in(0,u.Z)(t,d))(0,u.Z)(t,d).hasOwnProperty(e)&&r.concat((0,u.Z)(t,d)[e]);return r})),(0,o.Z)(this,"getErrorMessage",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e=e||t.getErrorCode(),t.getErrorMessages(e)[0]})),(0,o.Z)(this,"getErrorData",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e=e||t.getErrorCode(),(0,u.Z)(t,l)[e]})),(0,o.Z)(this,"getAllErrorMessages",(()=>{const t=[];for(const e in(0,u.Z)(this,d))(0,u.Z)(this,d).hasOwnProperty(e)&&t.push(...(0,u.Z)(this,d)[e]);return t})),e&&(r&&((0,u.Z)(this,d)[e]=[r]),i&&((0,u.Z)(this,l)[e]=i))}static fromPHPObject(t){const e=new h;return(0,c.Z)(e,d,t.errors),(0,c.Z)(e,l,t.error_data),e}static fromApiError(t){const e=new h;if((0,u.Z)(e,d)[t.code]=[t.message],(0,u.Z)(e,l)[t.code]=[t.data],t.additional_errors)for(const r of t.additional_errors)(0,u.Z)(e,d)[r.code]=[r.message],r.data&&((0,u.Z)(e,l)||(0,c.Z)(e,l,[]),(0,u.Z)(e,l)[r.code].push(r.data));return e}}var g=r(95122);class f extends Error{constructor(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];super(t.message||(0,g.__)("An unknown error occurred.","better-wp-security"),...r),Error.captureStackTrace&&Error.captureStackTrace(this,f),this.__response=t;for(const e in t)t.hasOwnProperty(e)&&Object.defineProperty(this,e,{value:t[e],configurable:!0,enumerable:!0,writable:!0})}toString(){return this.__response.toString()}getResponse(){return this.__response}}class p{constructor(t,e,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];(0,o.Z)(this,"type",void 0),(0,o.Z)(this,"error",void 0),(0,o.Z)(this,"data",void 0),(0,o.Z)(this,"success",void 0),(0,o.Z)(this,"info",void 0),(0,o.Z)(this,"warning",void 0),this.type=t,this.error=e,this.data=r,this.success=i,this.info=n,this.warning=s,Object.seal(this)}isSuccess(){return this.type===p.SUCCESS}static async fromResponse(t){const e=e=>{const r=t.headers?.get(`X-Messages-${e}`);return r?JSON.parse(r):[]},r=204!==t.status&&t.json?await t.json():null,i=I(r),n=i.hasErrors()?p.ERROR:p.SUCCESS,s=e("Success"),o=e("Info"),c=e("Warning");return new p(n,i,r,s,o,c)}}Object.defineProperty(p,"SUCCESS",{value:"success",writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(p,"ERROR",{value:"error",writable:!1,enumerable:!1,configurable:!1});const m=(0,n.createContext)({getUrl(t){t="settings"===t?"itsec":"itsec-"+t;const e=(0,s.removeQueryArgs)(document.location.href,...Object.keys((0,s.getQueryArgs)(document.location.href)));return(0,s.addQueryArgs)(e,{page:t})}});function v(t){const{getUrl:e}=(0,n.useContext)(m);return e(t)}function y(t){if(t<=999)return t.toString();if(t<=9999){const e=(t/1e3).toFixed(1);return"0"===e.charAt(e.length-1)?e.replace(".0","k"):`${e}k`}if(t<=99999)return t.toString().substring(0,2)+"k";if(t<=999999)return t.toString().substring(0,3)+"k";if(t<=9999999){const e=(t/1e6).toFixed(1);return"0"===e.charAt(e.length-1)?e.replace(".0","m"):`${e}m`}if(t<=99999999)return t.toString().substring(0,2)+"m";if(t<=999999999)return t.toString().substring(0,3)+"m";if(t<=9999999999){const e=(t/1e9).toFixed(1);return"0"===e.charAt(e.length-1)?e.replace(".0","b"):`${e}b`}return t}function E(t){if(!(0,i.isPlainObject)(t))return!1;const e=Object.keys(t);return 2===e.length&&e.includes("errors")&&e.includes("error_data")}function I(t){return t instanceof h?t:E(t)?h.fromPHPObject(t):function(t){if(!(0,i.isPlainObject)(t))return!1;const e=Object.keys(t);return(3===e.length||4===e.length)&&!(4===e.length&&!e.includes("additional_errors"))&&e.includes("code")&&e.includes("message")&&e.includes("data")}(t)?h.fromApiError(t):new h}function T(t){const e={};for(const[r,i]of t)e[r]=i;return e}function _(t,e){const r=[[],[]];for(const i of t)r[e(i)?0:1].push(i);return r}function b(t){if(t instanceof Error)throw t;throw new f(t)}const H="https://secure.gravatar.com/avatar/d7a973c7dab26985da5f961be7b74480?s=96&d=mm&f=y&r=g";function A(t,e){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,i.get)(t,["_links","self",0,"targetHints",e],r?void 0:[])}function w(t){return function(t,e){return(0,i.get)(t,["_links","self",0,"href"])}(t)}function Z(t,e){if(t&&t.links)for(const r of t.links)if(r.rel===e)return r}function S(t,e){if("object"!==t.type)return t;let r;for(const n in e)e.hasOwnProperty(n)&&"hidden"===e[n]["ui:widget"]&&(r||(r=(0,i.cloneDeep)(t)),delete r.properties[n]);return r||t}function C(t){let e=[];if(!t)return e;const r=t instanceof h?t:I((0,i.pick)(t,["code","message","data"]));return"rest_invalid_param"===r.getErrorCode()&&(e=Object.values(r.getErrorData().params)),[...r.getAllErrorMessages(),...e]}},87514:t=>{t.exports=function(){return this.wp.apiFetch}()},48015:t=>{t.exports=function(){return this.wp.data}()},6293:t=>{t.exports=function(){return this.wp.element}()},95122:t=>{t.exports=function(){return this.wp.i18n}()},73470:t=>{t.exports=function(){return this.wp.url}()},92819:t=>{"use strict";t.exports=window.lodash},1519:(t,e,r)=>{"use strict";function i(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}r.d(e,{Z:()=>i})},86033:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});var i=r(1519);function n(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,(0,i.Z)(t,e,"get"))}},13092:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});var i=r(1519);function n(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,(0,i.Z)(t,e,"set"),r),r}},4942:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});var i=r(49142);function n(t,e,r){return(e=(0,i.Z)(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},49142:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});var i=r(71002);function n(t){var e=function(t,e){if("object"!==(0,i.Z)(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!==(0,i.Z)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"===(0,i.Z)(e)?e:String(e)}},71002:(t,e,r)=>{"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}r.d(e,{Z:()=>i})}},t=>{var e=(76864,t(t.s=76864));((window.itsec=window.itsec||{}).core=window.itsec.core||{})["admin-notices-api"]=e}]);